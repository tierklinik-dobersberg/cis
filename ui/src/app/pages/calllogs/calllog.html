<div class="dash-card selection-container">
  <div class="date-selection">
    <label>Anrufe anzeigen f√ºr </label>
    <nz-date-picker [nzAllowClear]="false" [(ngModel)]="date" (ngModelChange)="onChange($event)"></nz-date-picker>
  </div>

  <div class="statistics">
    <nz-statistic [nzValue]="logs.length" nzTitle="Anrufe Heute" [nzPrefix]="prefixTpl"></nz-statistic>
    <ng-template #prefixTpl><i nz-icon nzType="phone" [nzRotate]="95"></i></ng-template>

    <nz-statistic [nzValue]="totalCallTime | duration" nzTitle="Gesamte Anrufdauer" [nzPrefix]="prefixTplCallTime">
    </nz-statistic>
    <ng-template #prefixTplCallTime><i nz-icon nzType="clock-circle"></i></ng-template>
  </div>
</div>

<nz-table #basicTable [nzData]="logs" class="dash-card data-container">
  <thead>
    <tr>
      <th>Zeit</th>
      <th>Kunde / Anrufer</th>
      <th>Dauer</th>
      <th>Agent</th>
      <th>Type</th>
      <th>Angerufene Nummer</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of basicTable.data; trackBy: trackLog">
      <td>{{data.localDate}}</td>
      <td>
        <a class="customer-link" *ngIf="!!data.customer; else: caller"
          [routerLink]="['/customer/view', data.customer.source, data.customer.cid]" nz-tooltip
          [nzTooltipTitle]="data.caller">
          {{data.customer.name}}&nbsp;{{data.customer.firstname}}
        </a>
        <ng-template #caller>
          {{ data.caller }}
        </ng-template>
      </td>
      <td>{{ (data.durationSeconds || 0) | duration }}</td>
      <td>{{ data.agent }}</td>
      <td>{{ data.callType || 'N/A' }}</td>
      <td>{{data.inboundNumber}}</td>
    </tr>
  </tbody>
</nz-table>
