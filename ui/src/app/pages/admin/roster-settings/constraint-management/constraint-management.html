<div class="flex flex-row items-center gap-3 mb-3">
  <div class="flex-grow"></div>
  <button class="tkd-icon-btn tkd-primary" nz-tooltip="Erstelle eine neue Regel" (click)="createConstraint()">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
    </svg>
  </button>
</div>

<nz-table #table [nzData]="constraints" class="p-0.5 bg-white rounded-md border shadow-md border-subtle">
    <thead>
        <tr>
            <th>Beschreibung</th>
            <th>Benutzer</th>
            <th>Rollen</th>
            <th>Type</th>
            <th>Art</th>
            <th>Ausdruck</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let row of table.data; trackBy: trackConstraint">
            <td>{{ row.description }}</td>
            <td>
              <span *ngFor="let user of row.appliesToUser; let last=last">
                {{ user }}{{ last ? '': ', '}}
              </span>
            </td>
            <td>
              <span *ngFor="let role of row.appliesToRole; let last=last">
                {{ role }}{{ last ? '': ', '}}
              </span>
            </td>
            <td>
                {{ row.hard ? 'Hart' : 'Soft'}}
            </td>
            <td>
                {{ row.rosterOnly ? 'Dienstplan' : 'Schicht' }}
            </td>
            <td>
              <span class="inline-block bg-subtle shadow-inner font-lato py-1 px-1.5 rounded text-xs">{{ row.expression }}</span>
            </td>
            <td>
              <div class="flex flex-row items-center gap-2">
                <button class="tkd-icon-btn tkd-small tkd-outline tkd-primary no-shadow" (click)="editConstraint(row)" nz-tooltip="Regel bearbeiten">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path
                      d="M2.695 14.763l-1.262 3.154a.5.5 0 00.65.65l3.155-1.262a4 4 0 001.343-.885L17.5 5.5a2.121 2.121 0 00-3-3L3.58 13.42a4 4 0 00-.885 1.343z" />
                  </svg>
                </button>
              </div>
            </td>
        </tr>
    </tbody>
</nz-table>
