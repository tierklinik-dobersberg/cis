<div class="flex flex-row items-center justify-end">
    <button class="tkd-btn tkd-primary" (click)="createNewRequest()">
        Antrag erstellen
    </button>
</div>

<nz-table [nzData]="requests" #requestTable class="bg-white rounded shadow">
    <thead>
        <tr>
            <th class="w-8"></th>
            <th class="w-80">
                <span class="inline-block w-6"></span>
                Zeitraum
            </th>
            <th class="w-36">
                Antragsart
            </th>
            <th>
                Beschreibung
            </th>
            <th>
                Kommentar
            </th>
            <th class="w-36 text-center!">
                Aktionen
            </th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let row of requestTable.data; trackBy: trackRequests">
            <td>
              <div *ngIf="row.approval as approval">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-alert-green-dark" *ngIf="approval.approved">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-alert-red" *ngIf="!approval.approved">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
            </td>
            <td>
                <div class="flex flex-row items-center gap-2">
                    <div>
                        {{ row.from | date:'shortDate' }}
                        <ng-container *ngIf="row.costs.vacationDays < 0">
                            - {{ row.to | date:'shortDate' }}
                        </ng-container>
                    </div>

                    <ng-container *ngIf="row.requestType !== 'credits'">
                      <span *ngIf="row.approval !== null && row.approval.approved" class="text-secondary">({{ row.approval.actualCosts.vacationDays}} Tage / {{ (row.approval?.actualCosts.duration*-1) | jsDuration }})</span>
                      <span *ngIf="row.approval === null" class="text-secondary">({{ row.costs.vacationDays }} Tage / {{ (row.costs.duration * -1)| jsDuration }})</span>
                      <span *ngIf="row.approval?.approved === true && row.approval?.actualCosts.duration === 0" class="text-secondary">(ZA)</span>
                    </ng-container>
                    <ng-container *ngIf="row.requestType === 'credits'">
                      <span class="text-secondary">({{ row.approval.actualCosts.vacationDays }} Tage)</span>
                    </ng-container>
                </div>
            </td>
            <td>
              {{ row | requestType }}
            </td>
            <td>{{ row.description }}</td>
            <td>
                {{ row.approval?.comment }}
            </td>
            <td>
                <div class="flex flex-row items-center justify-center gap-2">
                    <button class="tkd-btn tkd-danger tkd-outline" *ngIf="row.approval === null" (click)="deleteRequest(row.id)">
                        LÃ¶schen
                    </button>
                </div>
            </td>
        </tr>
    </tbody>
</nz-table>
